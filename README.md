# Pedestrian-detection-with-statistics

# 功能简介

## 检测

行人检测分为两部分，一部分是直接调用摄像头进行检测，另一种是从本地读入视频文件，对视频文件进行检测，运行predictUI.py即可打开PyQt5编写的UI界面，点击开始即进行摄像头的实时检测，点击视频检测即从文件读入视频进行检测

## 统计

当检测选择是实时检测时，每隔5分钟会保存一次行人数量数据，数据保存至dayLogs中，当在UI界面中选择统计后，可以根据选择的统计方式，从dayLogs文件夹中读出数据进行统计

# 演示

## 检测演示

直接运行并根据UI界面提示进行演示即可

## 统计演示

当需要进行统计功能演示时，但又没有足够的数据时，可以借助fakeData.py进行伪数据的生成，以便完成数据的统计功能展示

## 合成视频

如果需要将视频内容检测并重新合成视频可以通过后面的步骤进行

1、在videoDetection.py中设置path变量并运行，并新建一个名为videos的文件夹（也可以在代码中改成其他路径），检测后的结果将以图片的形式存储在这个文件夹中

2、在img_to_video.py中设置存放图片的文件夹路径，图像大小，视频帧率后运行，合成后的视频将保存至videos文件夹下（也可以根据需要修改路径）

3、如果想要保存原视频的声音，可以使用video2audio.py将原视频的音频保存下来，可以使用视频剪辑软件将img_to_video生成的视频和音频拼接在一起

# 权值文件

权值文件下载后需要放到model_data文件夹下

链接：https://pan.baidu.com/s/1lhz_7CRYgM17_xkRMo3DDw?pwd=tt5i 

提取码：tt5i 


